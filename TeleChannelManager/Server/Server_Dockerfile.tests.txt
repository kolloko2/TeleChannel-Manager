# Dockerfile for running TeleChannel Manager server tests
# Generated by Nikolay Kodzaev
# Date: 2025-06-22

FROM ubuntu:20.04

# Install dependencies
RUN apt-get update && apt-get install -y \
    qt5-default \
    qtbase5-dev \
    qt5-qmake \
    libqt5sql5-sqlite \
    libqt5network5 \
    g++ \
    make \
    libssl-dev \
    zlib1g-dev \
    && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /app

# Copy server source files
COPY Server /app

# Build tests
RUN qmake Server.pro && make

# Run tests
CMD ["./tests/test_database", "./tests/test_servermodel", "./tests/test_servercontroller"]